///////////////////////////////////////////////////////////////////////////////
// Raspberry Pi GPIO Interface
// ¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯
// File: gpio_io.h
// PA Consulting - Lawrence Jones
///////////////////////////////////////////////////////////////////////////////

#ifndef GPIO_IO_HEADER_INC
#define GPIO_IO_HEADER_INC

// Define the entry point for gpios
extern volatile unsigned *gpio;
// Define the chip state
extern Chip* chip;

///////////////////////////////////////////////////////////////////////////////
// GPIO INTERFACE
///////////////////////////////////////////////////////////////////////////////

/////////////////////////////////////////////////////////////
// GPIO Initialization //////////////////////////////////////
volatile unsigned*  init_gpio_access();

/////////////////////////////////////////////////////////////
// GPIO Malloc / Dealloc ////////////////////////////////////
Chip                *init_chip();
Pin                 *malloc_pin(int p);
void                dealloc_chip();
int                 chip_index_to_mem(int p);

/////////////////////////////////////////////////////////////
// GPIO Read ////////////////////////////////////////////////
Pin                 *get_pin_status(int p);
Pin                 *update_pin_status(Pin* pin);
Pin                 **update_all_pins();

/////////////////////////////////////////////////////////////
// GPIO Write ///////////////////////////////////////////////
void                set_with_word(uint32_t w);
void                clr_with_word(uint32_t w);
void                set_pin_value(int p, int v);
void                set_pin_state(int p, int v);

/////////////////////////////////////////////////////////////
// GPIO Display /////////////////////////////////////////////
void                printHeader();
void                printPin(Pin *pin);
void                printAll();

#endif